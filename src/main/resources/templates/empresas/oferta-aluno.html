<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Alunos Cadastrados na Oferta</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            margin-top: 60px;
        }
        h1, h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .table-container {
            margin-top: 30px;
            display: flex;
            justify-content: center;
        }
        .table {
            width: 100%;
            max-width: 90rem;
        }
        .thead-green {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Navbar  hipotética-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Ofertas</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#">Início</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Ofertas</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Títulos -->
        <h1><span th:text="${oferta.titulo}">Título da Oferta</span></h1>
        <h2><span th:text="${empresa.nome}">Nome da Empresa</span></h2>

        <!-- Tabela de Alunos -->
        <div class="table-container">
            <table class="table table-striped table-hover">
                <thead class="thead-green">
                    <tr>
                        <th>Selecionar</th>
                        <th>Nome Completo</th>
                        <th>Email</th>
                        <th>Habilidades</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="aluno : ${alunos}">
                        <td><input type="checkbox" class="select-candidato"></td>
                        <td th:text="${aluno.nomeCompleto}">Nome Completo</td>
                        <td th:text="${aluno.email}">Email</td>
                        <td th:text="${aluno.formatadoHabilidades}">Habilidades</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxes = document.querySelectorAll('.select-candidato');
            const confirmBtn = document.getElementById('confirm-selection-btn');

            function updateButtonState() {
                const selectedCount = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
                confirmBtn.disabled = selectedCount === 0;
            }

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const row = checkbox.closest('tr');
                    if (checkbox.checked) {
                        row.classList.add('selected-row');
                    } else {
                        row.classList.remove('selected-row');
                    }
                    updateButtonState();
                });
            });

            confirmBtn.addEventListener('click', function() {
                const selectedEmpresas = [];
                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        const empresaNome = checkbox.closest('tr').querySelector('td:nth-child(2)').innerText;
                        selectedEmpresas.push(empresaNome);
                    }
                });

                if (selectedEmpresas.length > 0) {
                    alert(`Você selecionou os seguintes candidatos: ${selectedEmpresas.join(', ')}`);
                }
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
